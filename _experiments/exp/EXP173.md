# EXP173: ä¿®å¤æ¨¡å‹ç´¢å¼•ç”Ÿæˆè„šæœ¬è·¯å¾„é—®é¢˜

## ä»»åŠ¡æ¦‚è¿°
**æ—¶é—´**: 2025-06-29
**ç›®æ ‡**: ä¿®å¤ `npm run models:index` å‘½ä»¤æ— æ³•æ‰¾åˆ°è„šæœ¬æ–‡ä»¶çš„é—®é¢˜
**çŠ¶æ€**: âœ… å·²å®Œæˆ

## é—®é¢˜åˆ†æ
ç”¨æˆ·æ·»åŠ äº†æ–°æ¨¡å‹"èµ›å¤ªå².glb"ï¼Œä½†åœ¨è¿è¡Œ `npm run models:index` æ—¶é‡åˆ°é”™è¯¯ï¼š
```
Error: Cannot find module 'D:\codee\xiyouji-rela-map\scripts\generate-model-index.js'
```

### æ ¹æœ¬åŸå› 
1. **è·¯å¾„ä¸åŒ¹é…**: package.json ä¸­æŒ‡å‘ `scripts/generate-model-index.js`
2. **å®é™…ä½ç½®**: è„šæœ¬å®é™…åœ¨ `scripts/build/generate-model-index.js`
3. **ç›¸å¯¹è·¯å¾„é”™è¯¯**: è„šæœ¬å†…éƒ¨è·¯å¾„ `../public/models` åº”è¯¥æ˜¯ `../../public/models`

## æŠ€æœ¯ä¿®å¤

### 1. ä¿®å¤ package.json è·¯å¾„
**æ–‡ä»¶**: `package.json`

**ä¿®æ”¹å‰**:
```json
"models:index": "node scripts/generate-model-index.js",
"models:scan": "node scripts/generate-model-index.js",
```

**ä¿®æ”¹å**:
```json
"models:index": "node scripts/build/generate-model-index.js",
"models:scan": "node scripts/build/generate-model-index.js",
```

### 2. ä¿®å¤è„šæœ¬å†…éƒ¨è·¯å¾„
**æ–‡ä»¶**: `scripts/build/generate-model-index.js`

**ä¿®æ”¹å‰**:
```javascript
const modelsDir = path.join(__dirname, '../public/models')
```

**ä¿®æ”¹å**:
```javascript
const modelsDir = path.join(__dirname, '../../public/models')
```

## éªŒè¯ç»“æœ

### âœ… è„šæœ¬æ‰§è¡ŒæˆåŠŸ
```bash
> npm run models:index

âœ… æ¨¡å‹ç´¢å¼•ç”ŸæˆæˆåŠŸ!
ğŸ“ æ‰«æç›®å½•: D:\codee\xiyouji-rela-map\public\models
ğŸ“„ ç´¢å¼•æ–‡ä»¶: D:\codee\xiyouji-rela-map\public\models\index.json
ğŸ­ æ‰¾åˆ°æ¨¡å‹: 12 ä¸ª
```

### âœ… æ–°æ¨¡å‹æˆåŠŸæ£€æµ‹
æ¨¡å‹åˆ—è¡¨åŒ…å«äº†æ–°æ·»åŠ çš„"èµ›å¤ªå².glb":
1. å“ªå’.glb
2. å”åƒ§.glb
3. å¤ªä¸Šè€å›.glb
4. å¦‚æ¥ä½›ç¥–.glb
5. å­™æ‚Ÿç©º.glb
6. æ²™åƒ§.glb
7. ç‰›é­”ç‹.glb
8. çŒªå…«æˆ’.glb
9. ç‰çš‡å¤§å¸.glb
10. ç™½é¾™é©¬.glb
11. è§‚éŸ³è©è¨.glb
12. **èµ›å¤ªå².glb** â† æ–°æ·»åŠ 

### âœ… ç´¢å¼•æ–‡ä»¶æ›´æ–°
`public/models/index.json` æˆåŠŸæ›´æ–°ï¼š
- æ¨¡å‹æ•°é‡: 12ä¸ª
- æœ€åæ›´æ–°: 2025-06-19T05:58:22.221Z
- åŒ…å«æ‰€æœ‰æ¨¡å‹æ–‡ä»¶

## æŠ€æœ¯ç»†èŠ‚

### ç›®å½•ç»“æ„åˆ†æ
```
xiyouji-rela-map/
â”œâ”€â”€ scripts/
â”‚   â””â”€â”€ build/
â”‚       â””â”€â”€ generate-model-index.js  â† å®é™…ä½ç½®
â”œâ”€â”€ public/
â”‚   â””â”€â”€ models/
â”‚       â”œâ”€â”€ index.json               â† ç”Ÿæˆçš„ç´¢å¼•
â”‚       â””â”€â”€ *.glb                    â† æ¨¡å‹æ–‡ä»¶
â””â”€â”€ package.json                     â† å‘½ä»¤é…ç½®
```

### è·¯å¾„è®¡ç®—
ä» `scripts/build/generate-model-index.js` åˆ° `public/models/`:
- `__dirname` = `scripts/build/`
- `../../public/models` = æ­£ç¡®è·¯å¾„
- `../public/models` = é”™è¯¯è·¯å¾„ï¼ˆç¼ºå°‘ä¸€å±‚ï¼‰

## è„šæœ¬åŠŸèƒ½éªŒè¯

### è‡ªåŠ¨æ£€æµ‹åŠŸèƒ½
- âœ… æ‰«æ `.glb` æ–‡ä»¶
- âœ… æŒ‰åç§°æ’åº
- âœ… ç”Ÿæˆå®Œæ•´ç´¢å¼•
- âœ… åŒ…å«å…ƒæ•°æ®

### è¾“å‡ºæ ¼å¼
```json
{
  "models": ["å“ªå’.glb", "å”åƒ§.glb", ...],
  "lastUpdated": "2025-06-19T05:58:22.221Z",
  "count": 12,
  "generatedBy": "generate-model-index.js",
  "description": "è‡ªåŠ¨ç”Ÿæˆçš„æ¨¡å‹æ–‡ä»¶ç´¢å¼•"
}
```

## ä½¿ç”¨æ–¹æ³•

### æ·»åŠ æ–°æ¨¡å‹åçš„æ“ä½œ
1. å°† `.glb` æ–‡ä»¶æ”¾å…¥ `public/models/` ç›®å½•
2. è¿è¡Œ `npm run models:index` é‡æ–°ç”Ÿæˆç´¢å¼•
3. ç´¢å¼•æ–‡ä»¶è‡ªåŠ¨æ›´æ–°ï¼ŒåŒ…å«æ–°æ¨¡å‹

### ç›¸å…³å‘½ä»¤
- `npm run models:index` - ç”Ÿæˆæ¨¡å‹ç´¢å¼•
- `npm run models:scan` - æ‰«ææ¨¡å‹ï¼ˆåŒä¸Šï¼‰
- `npm run models:watch` - ç›‘æ§æ¨¡å‹å˜åŒ–
- `npm run models:test` - æµ‹è¯•æ¨¡å‹æ£€æµ‹

## åç»­ä¼˜åŒ–å»ºè®®

### 1. è‡ªåŠ¨åŒ–ç›‘æ§
å¯ä»¥è€ƒè™‘æ·»åŠ æ–‡ä»¶ç›‘æ§ï¼Œå½“æ¨¡å‹ç›®å½•æœ‰å˜åŒ–æ—¶è‡ªåŠ¨é‡æ–°ç”Ÿæˆç´¢å¼•ã€‚

### 2. æ¨¡å‹éªŒè¯
å¯ä»¥æ·»åŠ æ¨¡å‹æ–‡ä»¶å®Œæ•´æ€§æ£€æŸ¥ï¼Œç¡®ä¿ `.glb` æ–‡ä»¶æ ¼å¼æ­£ç¡®ã€‚

### 3. ç¼“å­˜ä¼˜åŒ–
å¯ä»¥æ·»åŠ æ–‡ä»¶ä¿®æ”¹æ—¶é—´æ£€æŸ¥ï¼Œåªåœ¨æœ‰å˜åŒ–æ—¶é‡æ–°ç”Ÿæˆç´¢å¼•ã€‚

## æ€»ç»“
æˆåŠŸä¿®å¤äº†æ¨¡å‹ç´¢å¼•ç”Ÿæˆè„šæœ¬çš„è·¯å¾„é—®é¢˜ï¼Œç°åœ¨ç”¨æˆ·å¯ä»¥æ­£å¸¸æ·»åŠ æ–°æ¨¡å‹å¹¶è‡ªåŠ¨æ›´æ–°ç´¢å¼•ã€‚ä¿®å¤åŒ…æ‹¬ï¼š
1. æ›´æ­£ package.json ä¸­çš„è„šæœ¬è·¯å¾„
2. ä¿®å¤è„šæœ¬å†…éƒ¨çš„ç›¸å¯¹è·¯å¾„
3. éªŒè¯æ–°æ¨¡å‹"èµ›å¤ªå².glb"æˆåŠŸæ£€æµ‹

è„šæœ¬ç°åœ¨å¯ä»¥æ­£å¸¸å·¥ä½œï¼Œæ”¯æŒè‡ªåŠ¨æ£€æµ‹å’Œç´¢å¼•æ‰€æœ‰æ¨¡å‹æ–‡ä»¶ã€‚
