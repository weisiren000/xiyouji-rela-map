# EXP104: åç«¯æ•°æ®æœåŠ¡å¯åŠ¨å’Œç«¯å£é…ç½®

## é—®é¢˜æè¿°
ç”¨æˆ·åé¦ˆå‰ç«¯æ— æ³•åŠ è½½æ•°æ®ï¼Œå‘ç°åç«¯æœåŠ¡å™¨æœªå¯åŠ¨ã€‚

## é—®é¢˜åˆ†æ
1. **åç«¯æœåŠ¡æœªå¯åŠ¨**: éœ€è¦å¯åŠ¨Node.jsæ•°æ®æœåŠ¡å™¨
2. **ç«¯å£å†²çª**: å¤šä¸ªæœåŠ¡ä½¿ç”¨ç›¸åŒç«¯å£å¯¼è‡´å†²çª
3. **APIåœ°å€ä¸åŒ¹é…**: å‰ç«¯è°ƒç”¨åœ°å€ä¸åç«¯ç›‘å¬åœ°å€ä¸ä¸€è‡´

## è§£å†³è¿‡ç¨‹

### 1. æ£€æŸ¥åç«¯æœåŠ¡å™¨ä»£ç 
- ä½ç½®: `src/server/dataServer.js`
- åŠŸèƒ½: ExpressæœåŠ¡å™¨ï¼Œæä¾›JSONæ•°æ®API
- æ•°æ®æº: `docs/data/JSON/character` å’Œ `docs/data/JSON/character_alias`

### 2. ç«¯å£å†²çªè§£å†³
**ç«¯å£ä½¿ç”¨æƒ…å†µ**:
- 3000: è¢«å…¶ä»–æœåŠ¡å ç”¨
- 3001: è¢«å…¶ä»–æœåŠ¡å ç”¨  
- 3002: å‰ç«¯å¼€å‘æœåŠ¡å™¨(Vite)
- 3003: âœ… å¯ç”¨ï¼Œåˆ†é…ç»™åç«¯æœåŠ¡å™¨

**ä¿®æ”¹é…ç½®**:
```javascript
// src/server/dataServer.js
const PORT = 3003 // ä»3002æ”¹ä¸º3003
```

```typescript
// src/components/three/CharacterSpheres.tsx
const response = await fetch('http://localhost:3003/api/data/complete')
```

### 3. å¯åŠ¨åç«¯æœåŠ¡
```bash
cd src/server
node dataServer.js
```

## APIæµ‹è¯•ç»“æœ
```json
{
  "success": true,
  "data": {
    "totalCharacters": 150,
    "totalAliases": 332,
    "charactersByType": {
      "PROTAGONIST": 5,
      "DEITY": 71,
      "HUMAN": 44,
      "DEMON": 28,
      "DRAGON": 2
    },
    "powerDistribution": {
      "high": 35,
      "medium": 98,
      "low": 17
    }
  }
}
```

## æœåŠ¡æ¶æ„
- **å‰ç«¯**: http://localhost:3002 (Viteå¼€å‘æœåŠ¡å™¨)
- **åç«¯**: http://localhost:3003 (Expressæ•°æ®æœåŠ¡å™¨)
- **æ•°æ®**: æœ¬åœ°JSONæ–‡ä»¶ (482ä¸ªæ•°æ®ç‚¹)

## APIç«¯ç‚¹
- `GET /api/data/complete` - è·å–å®Œæ•´æ•°æ®(è§’è‰²+åˆ«å+ç»Ÿè®¡)
- `GET /api/characters` - è·å–è§’è‰²æ•°æ®
- `GET /api/aliases` - è·å–åˆ«åæ•°æ®
- `GET /api/stats` - è·å–æ•°æ®ç»Ÿè®¡
- `POST /api/cache/refresh` - åˆ·æ–°ç¼“å­˜

## æ•°æ®åŠ è½½æµç¨‹
1. å‰ç«¯ç»„ä»¶æŒ‚è½½æ—¶è°ƒç”¨API
2. åç«¯è¯»å–JSONæ–‡ä»¶å¹¶è½¬æ¢æ ¼å¼
3. ç”Ÿæˆ3Dä½ç½®åæ ‡
4. è¿”å›å®Œæ•´æ•°æ®ç»™å‰ç«¯æ¸²æŸ“

## çŠ¶æ€
âœ… åç«¯æœåŠ¡å™¨å¯åŠ¨æˆåŠŸ
âœ… APIæ¥å£æ­£å¸¸å·¥ä½œ
âœ… æ•°æ®åŠ è½½å®Œæˆ(150è§’è‰²+332åˆ«å)
âœ… ç«¯å£å†²çªå·²è§£å†³
ğŸ”„ ç­‰å¾…å‰ç«¯æ•°æ®æ¸²æŸ“ç¡®è®¤
