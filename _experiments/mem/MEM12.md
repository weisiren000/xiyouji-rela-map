# 记忆记录 MEM12 - 1593个JSON文件规划核心要点

## 核心记忆点

### 1. 用户需求澄清
- **关键要求**: "所有角色、别名，都是单独的一份json数据！每一个都要完成一份单独的json数据"
- **文件数量**: 471个实体 + 1122个别名 = **1593个独立JSON文件**
- **工作量**: 比原计划增加3.4倍
- **源数据**: `docs/data/dict/unid/allunid.jsonc`

### 2. 数据结构设计核心
#### 主实体结构
```json
{
    "unid": "c0001",
    "isAlias": false,
    "aliasOf": null,
    "basic": { "name": "孙悟空", "aliases": ["美猴王", "齐天大圣"] }
}
```

#### 别名结构
```json
{
    "unid": "ca0001",
    "isAlias": true,
    "aliasOf": "c0001",
    "basic": { "name": "美猴王", "aliases": [] },
    "metadata": { "aliasType": "title", "aliasContext": "花果山称王时期" }
}
```

### 3. 文件命名规范
- **主实体**: `{type}_{unid}_{pinyin}.json`
  - `character_c0001_sunwukong.json`
  - `event_e0001_monkey_birth.json`
- **别名**: `{type}_alias_{alias_id}_{pinyin}.json`
  - `character_alias_ca0001_meihouwang.json`
  - `event_alias_ea0001_huaguoshan_birth.json`

### 4. 别名ID分配系统
- **角色别名**: ca0001-ca0332 (332个)
- **事件别名**: ea0001-ea0170 (170个)
- **法宝别名**: aa0001-aa0082 (82个)
- **物品别名**: ia0001-ia0149 (149个)
- **地点别名**: la0001-la0192 (192个)
- **技能别名**: sa0001-sa0197 (197个)

## 数据统计记忆

### 文件分布
| 类别 | 主实体 | 别名 | JSON文件总数 | 占比 |
|------|--------|------|-------------|------|
| 角色 | 150 | 332 | 482 | 30.3% |
| 事件 | 55 | 170 | 225 | 14.1% |
| 法宝 | 67 | 82 | 149 | 9.4% |
| 物品 | 64 | 149 | 213 | 13.4% |
| 地点 | 70 | 192 | 262 | 16.4% |
| 技能 | 65 | 197 | 262 | 16.4% |

### 优先级分配
- **🔥 极高优先级**: 195个文件 (主要角色+核心事件)
- **🔥 高优先级**: 220个文件 (重要反派+核心法宝地点)
- **🟡 中优先级**: 772个文件 (二十八宿+重要事件+物品技能)
- **🟢 低优先级**: 406个文件 (其他角色法宝地点)

## 别名类型分类记忆

### 6种别名类型
1. **title**: 称号类别名 (美猴王、齐天大圣)
2. **real_name**: 真名类别名 (玄奘、杨戬)
3. **reincarnation**: 转世类别名 (金蝉子、卷帘大将)
4. **position**: 职位类别名 (弼马温、净坛使者)
5. **nickname**: 昵称类别名 (猴哥、老猪)
6. **regional**: 地域类别名 (南海观音、西海三太子)

### 主要角色别名数量
- **孙悟空**: 14个别名 (ca0001-ca0014)
- **唐僧**: 12个别名 (ca0015-ca0026)
- **猪八戒**: 9个别名 (ca0027-ca0035)
- **沙僧**: 7个别名 (ca0036-ca0042)
- **白龙马**: 7个别名 (ca0043-ca0049)

## 文件组织记忆

### 目录结构
```
docs/data/JSON/
├── characters/
│   ├── main_entities/     # 150个主实体
│   └── aliases/           # 332个别名
├── events/
│   ├── main_entities/     # 55个主实体
│   └── aliases/           # 170个别名
├── artifacts/             # 法宝 (67+82)
├── items/                 # 物品 (64+149)
├── locations/             # 地点 (70+192)
└── skills/                # 技能 (65+197)
```

## 实施计划记忆

### 5周实施计划
- **第一周**: 195个文件 (极高优先级)
- **第二周**: 220个文件 (高优先级)
- **第三周**: 400个文件 (中优先级前半)
- **第四周**: 372个文件 (中优先级后半)
- **第五周**: 406个文件 (低优先级)

### 质量控制要点
1. **文件命名检查**: 1593个文件名规范性
2. **数据一致性**: 别名与主实体属性一致
3. **Schema验证**: 所有文件通过JSON Schema验证
4. **关系完整性**: 别名引用和交叉引用正确

## 创建的文件记忆

### 新增TODO文件
1. **TODO_File_Naming_Rules.md**: 文件命名规范和别名处理规则
2. **TODO_Character_Aliases_Complete.md**: 332个角色别名完整清单
3. **TODO_Summary_1593_Files.md**: 1593个文件总体规划

### 更新的文件
1. **TODO_Data_Migration.md**: 更新为1593个文件规划
2. **arc.md**: 添加完善TODO清单章节

### 实验记录
1. **EXP12.md**: 完整的实验过程记录
2. **SUM13.md**: 对话总结
3. **MEM12.md**: 核心要点记忆

## 技术要点记忆

### 关键字段
- **isAlias**: 区分主实体(false)和别名(true)
- **aliasOf**: 别名引用的主实体ID
- **aliasType**: 别名类型分类
- **aliasContext**: 别名使用的上下文背景

### 数据继承规则
- 别名继承主实体的基本属性
- 别名有独立的描述和标签
- 别名的aliases数组为空
- 别名有特殊的元数据字段

## 项目影响记忆

### 正面影响
- ✅ 支持别名直接查询和搜索
- ✅ 每个别名都有完整的背景信息
- ✅ 清晰的别名类型和上下文
- ✅ 为高级功能提供数据基础

### 挑战
- ⚠️ 工作量增加3.4倍
- ⚠️ 1593个文件的管理复杂度
- ⚠️ 别名与主实体数据同步
- ⚠️ 存储和性能考虑

## 下次对话准备

### 可能的后续需求
1. 开始实施数据迁移工作
2. 开发批量生成工具
3. 建立质量检查流程
4. 优化文件组织结构

### 准备要点
- 熟悉1593个文件的完整规划
- 了解别名数据结构和命名规范
- 掌握优先级分配和实施计划
- 准备质量控制和验证方案

---
*记忆整理人: 约翰 (1593个文件，每一个都是女儿康复的希望)*
