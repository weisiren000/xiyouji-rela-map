# MEM13: 局部视图界面设计记忆

## 时间
2025-06-18

## 核心记忆点

### 用户偏好更新
- 用户偏好局部视图界面设计：独立场景方案(方案B) + 分阶段实现策略
- 用户接受技术建议，同意先实现MVP版本再增强功能
- 用户偏好左右分屏布局：左侧3D场景，右侧400px信息面板
- 用户偏好左上角固定返回按钮位置
- 用户偏好完全隐藏其他角色以实现聚焦效果

### 技术架构决策
- 采用独立场景方案而非基于现有组件的扩展方案
- 使用CSS Grid布局实现左右分屏：`grid-template-columns: 1fr 400px`
- 状态管理扩展：添加viewMode和selectedCharacter状态
- 分阶段实现：阶段1实现核心功能，阶段2添加动画和高级控制

### 实现策略
- **阶段1 (MVP)**：独立场景 + 直接切换 + 固定相机角度
- **阶段2 (增强)**：缩放动画过渡 + 用户可调相机控制
- 风险控制：先实现基础功能确保稳定性，再逐步增强

### 组件架构设计
```
CharacterDetailView
├── CharacterDetailScene (左侧3D场景)
├── CharacterDetailPanel (右侧信息面板)
└── DetailViewBackButton (左上角返回按钮)
```

### 状态流转逻辑
```
全局视图 → 点击角色 → 设置selectedCharacter → 切换viewMode → 详情视图
详情视图 → 点击返回 → 清除selectedCharacter → 切换viewMode → 全局视图
```

## 项目管理记忆
- 创建了详细的TODO计划文档 (EXP116.md)
- 建立了完整的开发顺序和风险评估
- 使用_experiments目录记录设计决策和实现计划

## 技术债务管理
- 为未来功能扩展预留了架构空间
- 通过分阶段实现平衡功能需求与技术风险
- 保持代码的可维护性和扩展性

## 下一步工作方向
按照EXP116.md中的TODO计划开始实施：
1. 扩展useGalaxyStore状态管理
2. 创建CharacterDetailScene独立场景组件
3. 实现CharacterDetailView布局组件
4. 开发信息面板和返回按钮
5. 集成点击交互逻辑

这个记忆点标志着项目从单一全局视图向双视图模式的重要架构升级。

# 记忆 - 西游记法宝JSON文件创建进度更新

## 总体进度
截至目前，已完成了51个西游记法宝的JSON文件创建，占总数的76%。这些法宝按照unid编号从a0001到a0051进行了系统化整理。还有16个法宝（a0052-a0067）待创建。

## 法宝分类系统
随着数据创建的深入，我们已经建立了一个较为完善的法宝分类系统，包括：
- **武器类**：staff_weapon, melee_weapon等
- **容器类**：magical_container
- **工具类**：utility_tool, illumination_tool等
- **服饰类**：magical_headwear, magical_clothing
- **建筑类**：magical_structure
- **特殊类**：artifact_creature（既是生物又是法宝）

## 特殊处理情况
1. **同名法宝处理**：
   - 芭蕉扇有三个版本（a0014、a0036、a0043）
   - 玉净瓶有两个版本（a0026、a0039）
   - 紫金红葫芦有两个版本（a0008、a0031）
   - 七星剑/七星宝剑（a0016、a0032）
   - 混元金斗有两个版本（a0041、a0048）
   - 处理方式：文件名添加序号，描述中明确区别，metadata添加note说明

2. **高阶法宝属性设计**：
   - 如来佛祖的紫金钵盂（a0049）：rank=3, power=90, influence=92
   - 元始天尊的混元金斗（a0041）：rank=4, power=85, influence=88
   - 太上老君的混元金斗（a0048）：rank=4, power=85, influence=88
   - 属性值设计原则：根据法宝在原著中的表现和所有者的地位来确定

## 待解决问题
还有几个可能重复的法宝需要特别关注：
- a0052 金铙（与a0005比较）
- a0055 幌金绳（与a0010比较）
- a0064 金铃（与a0023比较）
- a0067 混元金斗（与a0041和a0048比较）

## 数据结构优化
1. 为更多法宝添加了associatedEvents字段，记录其在西游记中的重要出场
2. 通过relationship属性明确法宝在事件中的具体作用
3. 扩展了标签系统，使其更好地反映法宝的特性和功能

## 进度追踪
进度在docs/data/TODO_artifact_creation.md文件中持续更新，记录已完成法宝、待完成法宝和特殊情况处理。
