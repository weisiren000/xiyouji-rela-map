# MEM162: 事件关系图谱GUI面板开发技术记忆

## 核心技术记忆

### 1. GUI面板开发模式
- **库选择**: 使用 lil-gui 库构建专业调试界面
- **组件结构**: 独立的GUI组件 + 状态管理 + 目标组件集成
- **参数分组**: 按功能逻辑分组，提高可用性
- **默认状态**: 所有文件夹默认收拢，避免界面混乱

### 2. 配置系统设计模式
```typescript
// 配置接口设计
interface ComponentConfig {
  // 基础属性
  baseProperty: number
  
  // 动画属性  
  animationIntensity: number
  animationSpeed: number
  
  // 交互属性
  hoverMultiplier: number
  dragMultiplier: number
}

// 预设系统
const PRESETS = {
  default: { name: '默认', config: DEFAULT_CONFIG },
  performance: { name: '性能优化', config: PERFORMANCE_CONFIG }
}
```

### 3. 状态管理集成模式
- **扩展现有Store**: 在 useGalaxyStore 中添加新配置
- **更新方法**: 提供 `updateXXXConfig` 方法
- **默认值**: 基于现有实现设置合理默认值
- **类型安全**: 使用 TypeScript 确保类型安全

### 4. 组件参数化改造模式
```typescript
// 硬编码 → 配置驱动
// 之前: tempObject.position.y += Math.sin(time * 2) * 0.3
// 之后: tempObject.position.y += Math.sin(time * config.floatSpeed) * config.floatIntensity

// 交互状态参数化
if (isDragging(i)) {
  baseSize *= config.dragSizeMultiplier
} else if (isHovered(i)) {
  baseSize *= config.hoverSizeMultiplier
}
```

### 5. GUI面板位置和可见性控制
- **位置配置**: 支持 top/right/bottom/left 位置参数
- **可见性控制**: 根据相关功能的显示状态控制GUI显示
- **z-index管理**: 确保GUI面板在合适的层级
- **指针事件**: 设置 `pointerEvents: 'auto'` 确保交互正常

### 6. 预设系统实现模式
```typescript
// 预设应用逻辑
const applyPreset = () => {
  const selectedPreset = PRESETS[presetController.preset]
  if (selectedPreset) {
    updateConfig(selectedPreset.config)
    // 更新GUI显示
    Object.assign(guiConfig, selectedPreset.config)
    gui.updateDisplay()
  }
}
```

## 应用场景记忆
- **适用**: 需要实时调试复杂3D渲染参数的场景
- **典型用例**: 粒子系统、材质效果、动画参数、交互反馈
- **扩展性**: 可复用于任何需要参数调试的Three.js组件

## 性能优化记忆
- **几何体优化**: 提供分段数和环数控制
- **动画强度控制**: 可降低计算密集度
- **预设优化**: 提供专门的性能优化预设
- **条件渲染**: GUI只在需要时显示

## 开发经验记忆
- **参数范围**: 为每个参数设置合理的最小值、最大值、步长
- **命名规范**: 使用清晰的中文名称，便于理解
- **分组逻辑**: 按功能而非技术实现分组
- **热更新**: 确保参数变化能触发组件重新渲染
- **类型导入**: 正确导入和使用TypeScript类型定义
